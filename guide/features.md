---
title: More Features of Matrix
layout: page-two-col
nav: false
parent: guide
permalink: guide/features/
description: A guide that details various features of Matrix, the federated chat platform that actually respects you.
---

## Больше возможностей Matrix

Теперь, когда вы освоили [основы](...), давайте поговорим о тонкостях различных функций Matrix. В руководстве предполагается, что вы предварительно ознакомились с функциями и что вы пришли за конкретными деталями, которые могут быть не слишком интуитивными.

## Всё про чат

<div class="flash flash-warn">
  <strong>ВНИМАНИЕ!</strong> Вы не сможете изменить имя пользователя Matrix. Выбирайте его осознанно.
</div>

#### Текст

Без префиксации сообщения с `/html`, Matrix поддерживает базовый markdown, как и все в [CommonMark spec](https://commonmark.org/help/). Изменения следующие:

* Для вставки изображений ссылка должна быть [MXC URI](#attachments), а не HTTP/S URL. Это требуется спецификацией Matrix для предотвращения создания удаленными домашними серверами IP-трекеров для отслеживания пользователей нескольких домашних серверов.
* Поддерживается подсветка синтаксиса языка в блоках кода - просто укажите язык в той же строке после первых трех обратных знаков.

Помимо вышесказанного:

  * Для зачеркивания Element и SchildiChat используют `<del>text</del>` (без `/html`), а FluffyChat использует `~text~~`.* For underline, Element and SchildiChat use `<u>text</u>` (also without `/html`), while FluffyChat uses `__text__`.
  * Обратите внимание, что вышеуказанные различия существуют только при составлении сообщения, и оба клиента отображают существующие сообщения одинаково.* Для спойлеров...
  * На Element и SchildiChat, вы должны префикс сообщения `/html`, а затем вставить одну из следующих строк кода в нужное место, чтобы скрыть `спойлерное содержимое` и, по желанию, показать `причину` рядом с ним. Обратите внимание, что если вы хотите, чтобы все сообщение было спойлером и без вставки причины, вы можете просто префикснуть сообщение с `/spoiler` без написания HTML.  ```html
  <span data-mx-spoiler="причина">спойлер</span> # с причиной
  <span data-mx-spoiler>спойлер</span> # без
  ```
  * В FluffyChat вы можете сделать то же самое, используя `||reason|spoiler content|||`.
  * Таблицы поддерживаются только в HTML (см. ниже)..

И, о командах слэша на Element и SchildiChat на PC, связанных с текстовыми сообщениями:

* Matrix также поддерживает [эти HTML-теги](https://spec.matrix.org/v1.1/client-server-api/#mroommessage-msgtypes), если вы префиксируете сообщение командой `/html`.
* Префикс вашего сообщения одной из следующих команд вызовет соответствующий визуальный эффект для всех пользователей Element/SchildiChat на ПК, которые в данный момент сфокусированы на комнате: `/confetti`, `/fireworks`, `/rainfall`, `/snowfall` и `/spaceinvaders`. Эффект будет срабатывать только один раз только для этих пользователей.
* Префикс вашего сообщения с `/me` приведет к тому, что ваше сообщение начнется с `*`, за которым последует ваше отображаемое имя[^1].
* Префикс сообщения `/rainbow` заставит текст отображаться в цветах радуги.
  * Две вышеуказанные команды можно объединить с помощью `/rainbowme`.
* Префикс сообщения с `/shrug`, `/tableflip`, `/unflip` и `/lenny` поместит соответствующий ASCII-эмоут в **начале** содержания сообщения. (Это отличается от Discord, где эмоция размещается в конце).

#### Вложения

Вы можете загружать файлы в сообщения. Ограничение по размеру зависит от домашнего сервера, на котором вы находитесь, но на большинстве домашних серверов оно составляет от 50 до 100 МБ. Ограничений на типы файлов нет, что позволяет некоторым приложениям предлагать возможность записи и отправки голосовых сообщений.

Всем файлам, которые вы загружаете на Matrix, присваивается [MXC URI](https://spec.matrix.org/v1.1/client-server-api/#matrix-content-mxc-uris), который вы можете использовать для ссылки на соответствующий файл. MXC URI можно получить, выполнив следующие действия:

1. Найдите сообщение.
2. В Element и SchildiChat на ПК наведите курсор на сообщение и нажмите на три точки. В FluffyChat долго нажмите на сообщение и нажмите на три точки вверху.
3. "Показать код."
4. В JSON-объекте `content` найдите атрибут `url`. URI, начинающийся с `mxc://`, является MXC URI.

Если вложением является изображение, URI позволяет сделать следующее, по крайней мере, в Element и SchildiChat:

* Измените свой аватар для текущей комнаты, используя `/myroomavatar mxc://...`
* Вставьте изображение в текстовые сообщения, вставив `![alt text](mxc://...)` (Вы также можете использовать теги `<img>` в разделе `/html`)

![Вставка картинки](../../assets/images/embed.png)

Доступ к вложению можно получить через Интернет, заменив префикс `mxc://` на `https://$SERVER/_matrix/media/r0/download/`, где `$SERVER` - домен *любого* домашнего сервера (он не обязательно должен находиться в комнате).

<div class="flash flash-warn">
Вложения могут быть удалены только оператором домашнего сервера, то есть они будут общедоступны. Это означает, в частности, что удаление сообщения **НЕ** приведет к удалению его вложений! (Однако, вложения, загруженные в зашифрованной комнате, видны публике в зашифрованном виде, и только те, кому они предназначены, имеют ключи для их расшифровки.)
</div>

#### Стикеры

В настоящее время поддержка стикеров в Matrix что-то противоречащее. Обратите внимание, что стикеры, отправленные из любого приложения, видны в обоих приложениях.

* Для Element и SchildiChat, стикеры предоставляются менеджерами интеграций. Если Вы используете [конфигурацию](../#пк-и-мобильное-устройство) от этого гайда, [Dimension integration manager](https://dimension.t2bot.io) разрешает Вам создать свои наборы стикеров.
* Для FluffyChat, стикеры (как и эмодзи) предоставляются комнатами, некоторые из них собраны в Пространстве [`#stickers-and-emojis:pixie.town`](https://matrix.to/#/#stickers-and-emojis:pixie.town). Чтобы получить стикеры или эмодзи в определённой комнате, нажмите на его название, расширьте настройки, и откройте настройки эмодзи. Затем, откройте нужный набор эмодзи или стикеров, и включите их по собственному желанию.

См. [этот пост](https://1hiking.github.io/posts/2021/09/matrix-stickers/) если Вам нужно более по-подробней.

### Реакции

Вы можете отреагировать на сообщение Юникод-эмодзи или произвольным текстом[^2]. The latter is available...

* В FluffyChat, отвечая на сообщение и введя `/react <текст>` в поле сообщения;
* В SchildiChat, открывая меню реакций, введя текст в поиске и нажатие "Отреагировать (текст)."

### Звонки

Звонки доступны только в ЛС (комнаты с 2 участниками).

На данный момент, групповые звонки создают [виджет](#интеграции) [Jitsi Meet](https://meet.jit.si) (не часть Matrix) который будет отображаться Всем пользователям.

## Всё про мосты

Matrix технически открыт, что также позволяет создавать мосты. Поэтому, Matrix позволяет подключаться к чатам из других платформ.

Примечание: шифрование **не** поддерживается многими мостами. Более того, следующие инструкции применяются во всей федерации Matrix, но частные провайдеры домашних серверов, а также некоторые общественные домашние серверы управляют определенными мостами в интересах своих пользователей, в этом случае, пожалуйста, обратитесь к соответствующим провайдерам.

<div class="flash flash-warn">
 Некоторые мосты предлагают возможность переноса учетной записи с другой платформы на Matrix (известный как puppeting). Однако это часто противоречит ToS платформы (так как совместимость противоречит централизованному подходу "walled garden") и может привести к потере аккаунта. Кроме того, это может повредить механизмы шифрования платформы, поскольку сообщения должны быть сначала расшифрованы перед повторным шифрованием. Наконец, оператор моста может увидеть ваши учетные данные (это не проблема, если вы сами размещаете мосты). Вы были предупреждены.
</div>

### Discord

Чтобы связать комнату Matrix с каналом Discord, Вы можете поставить [matrix-appservice-discord](https://github.com/Half-Shot/matrix-appservice-discord) если у Вас есть домашний сервер[^3], или воспользоваться бесплатными экземплярами:

* [t2bot](https://t2bot.io/discord)
* [tchncs.de](https://tchncs.de/matrix)
* [TeDomum](https://tedomum.net/service/matrix/bridges/)

Пользователи Matrix будут отображаться как вебхуки в Discord, а пользователи Discord будут отображаться как пользователи Matrix (Вы не можете начать с ними ЛС). В нём нет puppeting.

### Telegram

Чтобы подключить чат Telegram, Вы можете запустить [mautrix-telegram](https://github.com/mautrix/telegram) если у Вас есть домашний сервер, или воспользоваться общедоступными экземплярами:

* [t2bot](https://t2bot.io/telegram) (Без puppeting)
* [tchncs.de](https://tchncs.de/matrix) (Puppeting требует одобрения)
* [TeDomum](https://tedomum.net/service/matrix/bridges/)
* [SNT](https://syscom.utwente.io/info/matrix/telegram/)

Когда комната Matrix соединена мостом с группой Telegram, пользователи Matrix будут представлены ботом моста в Telegram, а пользователи Telegram будут отображаться как обычные пользователи в Matrix (но вы не сможете их DM). Когда вы входите в аккаунт Telegram на мосте, вы можете использовать его для управления собственным аккаунтом, чтобы взаимодействовать со всем Telegram из Matrix.

### Slack

Чтобы подключить канал Slaci, сделайте следующее в Element или SchildiChat на ПК:

1. В нужной комнате, нажмите на значок информации в верхнем левом углу.
2. "Добавить виджеты, мосты & ботов"
3. Найдите "Мост Slack" и следуйте инструкциям.

### IRC

Вы можете подключаться к IRC каналам [этих IRC-сетей](https://matrix-org.github.io/matrix-appservice-irc/latest/bridged_networks) прямо из Matrix. Пользователи Matrix будут отображаться со своими никнеймами, с суффиксом `[m]` или `|m` (можно изменить).

<div class="flash flash-warn">
  Вы <i>можете</i> зарегистрировать никнейм, но Ваш пароль NickServ может быть видимым домашнему серверу, так-как шифрование не поддерживается на мостах, так что всё на свой страх и риск.
</div>

### XMPP

Вы можете войти в любой XMPP MUC на любом экземпляре сразу через Matrix, используя Bifrost мост, предоставленный [matrix.org](https://github.com/matrix-org/matrix-bifrost/wiki/Address-syntax) или [aria-net.org](https://aria-net.org/SitePages/Portal/Bridges.aspx).

### Другое

Matrix поддерживает многие другие платформы, но такие мосты обычно требуют настройки. Если вы хотите установить мост между этими платформами, или если у вас есть требования к производительности, которые не могут быть удовлетворены существующими публичными мостами, вы можете либо:

* [Хостинг мостов самостоятельно](https://matrix.org/bridges/), если у вас есть собственный домашний сервер.
* Используйте публичные мосты (за которые вам предлагается пожертвовать):
  * [Aria Network](https://aria-net.org/SitePages/Portal/Bridges.aspx) (Facebook, Instagram, MS Teams, Twitter, WhatsApp; доступен только для аккаунтов на домашнем сервере aria-net.org)
  * [yatrix.org](https://yatrix.org/#interoperabilität) (Signal, WhatsApp; требуется одобрение)
  * [TeDomum](https://tedomum.net/service/matrix/bridges/) (WhatsApp)
* Установка мостов в рамках управляемого хостинга домашних серверов:
  * [Element Matrix Store](https://element.io/element-matrix-store) (WhatsApp, Slack, MS Teams, IRC, Discord, Telegram)
  * [etke.cc](https://etke.cc) (Многие платформы)
  * [ungleich](https://ungleich.ch/u/products/hosted-matrix-chat/) (Многие платформы)
* Приобрести управляемые услуги моста без домашнего сервера:
  * [Element One](https://element.io/element-one) (WhatsApp, Signal, Telegram)
  * [Beeper](https://www.beeper.com/) (Многие платформы; есть список ожидания)

## Всё про комнаты

Поскольку возможности FluffyChat по управлению комнатами несколько ограничены, в этом руководстве мы рассмотрим Element и SchildiChat на ПК.

### Продвижение

Если вы хотите продвигать публичную комнату, вы можете опубликовать публичные адреса и/или разместить ее в [каталоге комнат] вашего домашнего сервера(../#what-rooms-can-i-join).

Чтобы опубликовать адрес:

1. Перейдите в настройки комнаты.
2. Во вкладке "Общие", в разделе "Адреса комнат" есть "Локальные адреса". Как указано, вы можете создавать адреса только на том домашнем сервере, на котором вы находитесь[^4].
3. Введите локальную часть (часть перед `:`) желаемого адреса и нажмите "Добавить".
4. В разделе "Опубликованные адреса" введите полный адрес (с доменом домашнего сервера), затем нажмите "Добавить".
5. Основной адрес" используется для каталогов комнат и для упоминания комнаты в других комнатах. Выберите один из опубликованных адресов.
6. Если вы хотите рекламировать свою комнату в каталоге комнат вашего домашнего сервера, включите опцию "Публиковать эту комнату для публики в каталоге комнат (сервера)?".

Шаги с 1 по 3 может выполнить любой, тогда как шаги с 4 по 6 требуют от пользователя уровня полномочий, равного или превышающего требуемый уровень для "Изменить основной адрес комнаты".

Публичный адрес также позволяет [связать комнату с веб-страницей](https://matrix.to/).

### Модерация

См. [официальное руководство](https://matrix.org/docs/guides/moderation#moderating-rooms) (только раздел по ссылке).

<div class="flash flash-warn">
  Если Вы повысите пользователя на свой уровень, Вы <b>не</b> сможете понизить его обратно!
</div>
<div class="flash">
  Хорошей идеей является копирование ACL других комнат (особенно популярных публичных комнат) и использование их в своей комнате для усиления защиты вашей комнаты от нежелательного содержимого. Для этого:
  <ol>
    <li>Наберите <code>/devtools</code> в комнате, откуда Вы хотите украсть ACL.</li>
    <li>Нажмите "Просмотреть состояние комнаты."</li>
    <li>Нажмите <code>m.room.server_acl</code>.</li>
    <li>Нажмите "Edit."</li>
    <li>Скопируйте содержимое поля. (Бесполезно пытаться нажать кнопку "Отправить", так как у вас, скорее всего, нет на это разрешения).</li>
    <li>Повторите шаги с 1 по 4, на этот раз в комнате, в которой вы хотите использовать скопированный ACL.</li>
    <li>Вставьте содержимое в поле и нажмите "Отправить".</li>
    <li>Подтвердите успех. В комнате будет создано событие состояния, указывающее на то, что вы изменили ACL.</li>
    <li>Обратите внимание, что отказ в доступе к домашнему серверу, пользователи которого уже присутствуют в комнате, не приведет к автоматическому исключению пользователей. Если необходимо, введите домен домашнего сервера в поле поиска в списке участников и выкиньте их из комнаты. Они не смогут присоединиться обратно.</li>
  </ol>
</div>
<div class="flash">
  Вы <a href="https://github.com/matrix-org/mjolnir/issues/165">не можете</a> самостоятельно хостить <a href="https://github.com/matrix-org/mjolnir">mjolnir</a> без разрешения превысить ratelimit для домашнего сервера, на котором находится бот. Это означает, что вы можете самостоятельно хостить его, если у вас есть собственный домашний сервер, или проконсультируйтесь с операторами домашнего сервера (возможно, они уже хостят его).
</div>

### Интеграции

Интеграции в Matrix включают виджеты и боты.

Виджеты отображают интерактивную HTML-страницу поверх сообщений чата. Это работает только в Element и SchildiChat на ПК. Вы можете использовать команду `/addwidget` или ссылку "Добавить виджеты, мосты и ботов" в боковой панели информации о комнате. Обратите внимание, что отдельные пользователи должны согласиться на отображение виджета и могут в любой момент отказаться от него ("открепить"). Кроме того, любой пользователь с уровнем власти выше требуемого для "Изменения виджетов" сможет удалить ("открепить") виджет для всех в комнате.

Боты выполняют автоматические действия (например, отправляют сообщения). [maubot](https://github.com/maubot/maubot) - единственный известный самораспространяемый бот, содержащий множество плагинов. [t2bot.io](https://t2bot.io/), а также некоторые домашние серверы размещают определенные плагины для публичного использования.

[Bridges](#всё-про-мосты) также являются ботами, но некоторые мосты требуют создания новых учетных записей для работы в качестве марионеток, которые должны работать только на домашнем сервере, которым вы владеете или имеете разрешение на запуск таких ботов.

## Примечания

[^1]: Аналогично одноименной команде в Minecraft.

[^2]: В отличие от Instagram Direct, в котором это действие фактически переполняет экран (вы можете попробовать, но это потребует обратной разработки), приложения Matrix обрабатывают это должным образом, показывая первые несколько (≈10) символов, за которыми следует многоточие. Похоже, что он предназначен в основном для использования ботами, как показано в [This Week in Matrix](https://matrix.to/#/#thisweekinmatrix:matrix.org), но поскольку большинство ботов ничем не отличаются от других пользователей, люди тоже могут его использовать.

[^3]: Если вы используете свой собственный мост, пожалуйста, вручную включите [this pull request](https://github.com/Half-Shot/matrix-appservice-discord/pull/704) для поддержки разбора ответов Discord. (Мост t2bot включает это с декабря 2021 года).

[^4]: Если вам нужны адреса или/и паблики на других домашних серверах, вы можете создать аккаунты, присоединиться к комнате и выполнить эти действия. Но будьте вежливы и не спамьте. Помните, что операторы домашних серверов *могут* удалить вашу комнату из каталога комнат или даже запретить кому-либо на своих домашних серверах присоединиться к вашей комнате.